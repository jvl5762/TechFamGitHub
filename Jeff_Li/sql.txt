CREATE TABLE Suppliers (
	supplier_id	INTEGER,
	email		CHAR(40),
	name		CHAR(20),
	PRIMARY KEY (supplier_id)
);

CREATE TABLE Company (
	point_of_contact	CHAR(40),
	supplier_id		INTEGER,
	PRIMARY KEY (supplier_id),
	FOREIGN KEY (supplier_id) REFERENCES Suppliers (supplier_id) ON DELETE CASCADE
);

CREATE TABLE Credit_Card (
	number		INTEGER,
	name		CHAR(20),
	type		CHAR(20),
	expiration	DATE,
	PRIMARY KEY (number)
);

CREATE TABLE Auction (
	timestamp_start		TIMESTAMP,
	timestamp_end		TIMESTAMP,
	item_id			INTEGER,
	PRIMARY KEY (timestamp_start, item_id),
	FOREIGN KEY (item_id) REFERENCES Sales_Item (item_id) ON DELETE CASCADE
);

CREATE TABLE Bid (
	bid_id			INTEGER,
	amount			DECIMAL(2),
	cancellation_timestamp	TIMESTAMP,
	item_id			INTEGER,
	PRIMARY KEY (bid_id, item_id),
	FOREIGN KEY (item_id) REFERENCES Sales_Item (item_id) ON DELETE CASCADE
);

CREATE TABLE Phone (
	phone_number	INTEGER,
	PRIMARY KEY (phone_number)
);

CREATE TABLE Sale (
	transaction_id		INTEGER,
	price			DECIMAL(2),
	date			DATE,
	auction_or_sale		BOOLEAN,
	item_id			INTEGER,
	username		CHAR(20),
	credit_card_number	INTEGER,
	PRIMARY KEY (transaction_id, item_id, username, credit_card_number),
	FOREIGN KEY (item_id) REFERENCES Sales_Item (item_id) ON DELETE NO ACTION,
	FOREIGN KEY (username) REFERENCES Registered_Users (username) ON DELETE NO ACTION,
	FOREIGN KEY (credit_card_number) REFERENCES Credit_Card ON DELETE NO ACTION (credit_card_number)
);
